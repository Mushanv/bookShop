<?xml version="1.0" encoding="gb2312"?>
<!DOCTYPE web-app
    PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN"
    "http://java.sun.com/dtd/web-app_2_3.dtd">

<web-app>
	<display-name>ch18_bookstore_servlet</display-name>
	<filter>
		<filter-name>SetCharacterEncodingFilter</filter-name>
		<filter-class>filters.SetCharacterEncodingFilter</filter-class>
		<init-param>
			<param-name>encoding</param-name>
			<param-value>gb2312</param-value>
		</init-param>
	</filter>
	<filter>
		<filter-name>OrderFilter</filter-name>
		<filter-class>filters.OrderFilter</filter-class>
	</filter>
	<filter>
		<filter-name>HitCounterFilter</filter-name>
		<filter-class>filters.HitCounterFilter</filter-class>
	</filter>

	<filter-mapping>
		<filter-name>SetCharacterEncodingFilter</filter-name>
		<servlet-name>/*</servlet-name>
	</filter-mapping>
	<filter-mapping>
		<filter-name>OrderFilter</filter-name>
		<servlet-name>ReceiptServlet</servlet-name>
	</filter-mapping>
	<filter-mapping>
		<filter-name>HitCounterFilter</filter-name>
		<servlet-name>ReceiptServlet</servlet-name>
	</filter-mapping>

	<listener>
		<listener-class>listeners.ContextListener</listener-class>
	</listener>
	
	<servlet>
		<servlet-name>ShowCartServlet</servlet-name>
		<servlet-class>servlets.ShowCartServlet</servlet-class>
	</servlet>
	<servlet>
		<servlet-name>CatalogServlet</servlet-name>
		<servlet-class>servlets.CatalogServlet</servlet-class>
	</servlet>

	<servlet>
		<servlet-name>CashierServlet</servlet-name>
		<servlet-class>servlets.CashierServlet</servlet-class>
	</servlet>
	<servlet>
		<servlet-name>HeadServlet</servlet-name>
		<servlet-class>servlets.HeadServlet</servlet-class>
	</servlet>
	<servlet>
		<servlet-name>BookDetailsServlet</servlet-name>
		<servlet-class>servlets.BookDetailsServlet</servlet-class>
	</servlet>
	<servlet>
		<servlet-name>ReceiptServlet</servlet-name>
		<servlet-class>servlets.ReceiptServlet</servlet-class>
	</servlet>
	<servlet-mapping>
		<servlet-name>ShowCartServlet</servlet-name>
		<url-pattern>/bookshowcart</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>CatalogServlet</servlet-name>
		<url-pattern>/bookcatalog</url-pattern>
	</servlet-mapping>

	<servlet-mapping>
		<servlet-name>CashierServlet</servlet-name>
		<url-pattern>/bookcashier</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>HeadServlet</servlet-name>
		<url-pattern>/head</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>BookDetailsServlet</servlet-name>
		<url-pattern>/bookdetails</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>ReceiptServlet</servlet-name>
		<url-pattern>/bookreceipt</url-pattern>
	</servlet-mapping>
	<error-page>
		<exception-type>exception.BookNotFoundException</exception-type>
		<location>/errorpage.html</location>
	</error-page>
	<error-page>
		<exception-type>
			javax.servlet.UnavailableException
		</exception-type>
		<location>/errorpage.html</location>
	</error-page>
	<error-page>
		<exception-type>
			exception.BooksNotFoundException
		</exception-type>
		<location>/errorpage.html</location>
	</error-page>
</web-app>
